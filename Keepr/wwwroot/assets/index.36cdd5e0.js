import{r as X,c as Z,a as ee,b as te,d as N,S as q,e as ae,o as oe,f as w,g as x,h as u,i as p,j as o,k as V,F as U,w as O,l as v,v as f,m as R,M as T,n as se,p as re,q as D,s as M,t as h,u as ne,x as le,y as A,z as ie,A as ce,B,C as de,D as ue}from"./vendor.98d396ec.js";const pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}};pe();const n=X({user:{},account:{},keeps:[],userKeeps:[],userVaults:[],activeKeep:{},profileKeeps:[],profileVaults:[],activeProfile:{},activeVaultKeeps:[],activeVault:{}}),_e="modulepreload",H={},me="/",P=function(e,a){return!a||a.length===0?e():Promise.all(a.map(t=>{if(t=`${me}${t}`,t in H)return;H[t]=!0;const l=t.endsWith(".css"),i=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${i}`))return;const r=document.createElement("link");if(r.rel=l?"stylesheet":_e,l||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),l)return new Promise((_,b)=>{r.addEventListener("load",_),r.addEventListener("error",b)})})).then(()=>e())};function ge(s){switch(s){case"./pages/AboutPage.vue":return P(()=>import("./AboutPage.a4e651f3.js"),["assets/AboutPage.a4e651f3.js","assets/vendor.98d396ec.js"]);case"./pages/AccountPage.vue":return P(()=>import("./AccountPage.5bd82c60.js"),["assets/AccountPage.5bd82c60.js","assets/AccountPage.1d38451d.css","assets/vendor.98d396ec.js"]);case"./pages/HomePage.vue":return P(()=>import("./HomePage.06aac096.js"),["assets/HomePage.06aac096.js","assets/vendor.98d396ec.js"]);case"./pages/ProfilePage.vue":return P(()=>import("./ProfilePage.865dafbf.js"),["assets/ProfilePage.865dafbf.js","assets/ProfilePage.a5b5c995.css","assets/vendor.98d396ec.js"]);case"./pages/VaultPage.vue":return P(()=>import("./VaultPage.ead6c77d.js"),["assets/VaultPage.ead6c77d.js","assets/VaultPage.01ac70a8.css","assets/vendor.98d396ec.js"]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function C(s){return()=>ge(`./pages/${s}.vue`)}const ve=[{path:"/",name:"Home",component:C("HomePage")},{path:"/about",name:"About",component:C("AboutPage")},{path:"/account",name:"Account",component:C("AccountPage"),beforeEnter:te},{path:"/profile/:id",name:"Profile",component:C("ProfilePage"),beforeEnter:N},{path:"/vaults/:id",name:"Vault",component:C("VaultPage"),beforeEnter:N}],L=Z({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:ee(),routes:ve});class c{static async confirm(e="Are you sure?",a="You won't be able to revert this!",t="warning",l="Yes, delete it!"){try{return!!(await q.fire({title:e,text:a,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l})).isConfirmed}catch{return!1}}static toast(e="Warning!",a="warning",t="top-end",l=3e3,i=!0){q.fire({title:e,icon:a,position:t,timer:l,timerProgressBar:i,toast:!0,showConfirmButton:!1})}static error(e){var a;if(e.isAxiosError){const{response:t}=e;this.toast(((a=t.data.error)==null?void 0:a.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const z=window.location.origin.includes("localhost"),Y=z?"https://localhost:5001":"",fe="dev-cbpq8j47.us.auth0.com",he="fHvefOfTXyBtvuwJcs6QLV8eJgVgdZB4",be="https:CalebDev.com",d=ae.create({baseURL:Y,timeout:8e3});class ye{async getAllKeeps(){try{const e=await d.get("api/keeps");n.keeps=e.data}catch(e){console.log(e),c.toast(e.message,"error")}}async createKeep(e,a){try{const t=await d.post("api/keeps",e);n.keeps.push(t.data),n.userKeeps.push(t.data)}catch(t){console.error(t),c.toast(t.message)}}async incrementViews(e,a){try{const t=await d.put("api/keeps/"+e+"/view",a)}catch(t){console.error(t),c.toast(t.message,"error")}}async incrementKeeps(e,a){try{a.kept+=1;const t=await d.put("api/keeps/"+e+"/keep",a)}catch(t){console.error(t),c.toast(t.message,"error")}}async deleteKeep(e){try{const a=await d.delete("api/keeps/"+e);n.keeps=n.keeps.filter(t=>t.id!=e),n.profileKeeps=n.profileKeeps.filter(t=>t.id!=e),n.userKeeps=n.userKeeps.filter(t=>t.id!=e),n.activeVaultKeeps=n.activeVaultKeeps.filter(t=>e!=t.id),c.toast("keep deleted!","success")}catch(a){console.error(a),c.toast(a.message,"error")}}}const K=new ye;var y=(s,e)=>{for(const[a,t]of e)s[a]=t;return s};const ke={name:"App",setup(){return oe(async()=>{await K.getAllKeeps()}),{appState:w(()=>n)}}};function we(s,e,a,t,l,i){const r=x("Navbar"),_=x("KeepModal"),b=x("router-view");return u(),p(U,null,[o("header",null,[V(r)]),o("main",null,[V(_),V(b)])],64)}var xe=y(ke,[["render",we]]);const Ve={setup(){return{}}},Ke={class:"component"},$e={class:"modal fade",id:"createVaultModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Se={class:"modal-dialog"},Ae={class:"modal-content"},Pe={class:"modal-body"},Ce={class:"d-flex flex-column"},Ee=o("h3",null,"Create a New Keep",-1),Te=o("label",{for:""},"Title",-1),De=o("label",{for:"",class:"mt-2"},"Img Url",-1),Me=o("label",{for:"",class:"mt-2"},"Description",-1),Ie=o("div",{class:"d-flex justify-content-end mt-4"},[o("button",{class:"btn btn-primary"},"submit")],-1);function Oe(s,e,a,t,l,i){return u(),p("div",Ke,[o("div",$e,[o("div",Se,[o("div",Ae,[o("div",Pe,[o("div",Ce,[Ee,o("form",{action:"",onSubmit:e[3]||(e[3]=O(r=>s.createKeep(),["prevent"])),id:"create-keep-form"},[Te,v(o("input",{type:"text",class:"form-control",placeholder:"title...","onUpdate:modelValue":e[0]||(e[0]=r=>s.keepData.name=r)},null,512),[[f,s.keepData.name]]),De,v(o("input",{type:"text",class:"form-control",placeholder:"image url...","onUpdate:modelValue":e[1]||(e[1]=r=>s.keepData.img=r)},null,512),[[f,s.keepData.img]]),Me,v(o("textarea",{name:"",id:"",cols:"30",rows:"6",placeholder:"description...",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=r=>s.keepData.description=r)},null,512),[[f,s.keepData.description]]),Ie],32)])])])])])])}var Le=y(Ve,[["render",Oe]]),je=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Le});class Ne{async createVault(e){try{const a=await d.post("api/vaults",e);n.profileVaults.push(a.data),n.userVaults.push(a.data)}catch(a){console.error(a),c.toast(a.message,"error")}}async getVault(e){try{const a=await d.get("api/vaults/"+e);n.activeVault=a.data}catch(a){console.error(a.response),c.toast(a.response.data,"error"),L.push({name:"Home"})}}async deleteVault(e){try{const a=await d.delete("api/vaults/"+e);console.log(a.data)}catch(a){console.error(a),c.toast(a.message,"error")}}}const qe=new Ne;const Ue={setup(){let s=R({}),e=R({});return{keepData:s,vaultData:e,async createKeep(){s.value.views=0,s.value.kept=0,await K.createKeep(s.value),T.getOrCreateInstance(document.getElementById("createKeepModal")).hide(),document.getElementById("create-keep-form").reset(),s.value={}},async createVault(){e.value.isPrivate||(e.value.isPrivate=!1,document.getElementById("create-vault-form").reset(),T.getOrCreateInstance(document.getElementById("createVaultModal")).hide()),console.log(e.value),await qe.createVault(e.value)}}}},m=s=>(D("data-v-6be30a3c"),s=s(),M(),s),Re={class:"component"},Be=re('<div class="btn-group dropstart" data-v-6be30a3c><button type="button" class="btn btn-primary dropdown-toggle modal-btn" data-bs-toggle="dropdown" aria-expanded="false" aria-label="create vault and keep button" data-v-6be30a3c><h1 class="m-0" data-v-6be30a3c><i class="mdi mdi-plus p-0 m-0" data-v-6be30a3c></i></h1></button><ul class="dropdown-menu" data-v-6be30a3c><li data-v-6be30a3c><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#createVaultModal" data-v-6be30a3c>Create Vault</a></li><li data-v-6be30a3c><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#createKeepModal" data-v-6be30a3c>Create Keep</a></li></ul></div>',1),He={class:"modal fade",id:"createKeepModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ze={class:"modal-dialog"},Ye={class:"modal-content"},We={class:"modal-body"},Fe={class:"d-flex flex-column"},Ge=m(()=>o("h3",null,"Create a New Keep",-1)),Je=m(()=>o("label",{for:""},"Title",-1)),Qe=m(()=>o("label",{for:"",class:"mt-2"},"Img Url",-1)),Xe=m(()=>o("label",{for:"",class:"mt-2"},"Description",-1)),Ze=m(()=>o("div",{class:"d-flex justify-content-end mt-4"},[o("button",{class:"btn btn-primary"},"submit")],-1)),et={class:"modal fade",id:"createVaultModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},tt={class:"modal-dialog"},at={class:"modal-content"},ot={class:"modal-body"},st={class:"d-flex flex-column"},rt=m(()=>o("h3",null,"Create a New Vault",-1)),nt=m(()=>o("label",{for:""},"Title",-1)),lt=m(()=>o("label",{for:"",class:"mt-2"},"Img Url",-1)),it=m(()=>o("label",{for:"",class:"mt-2"},"Description",-1)),ct=m(()=>o("label",{for:"",class:"mt-3"},"Private?",-1)),dt=m(()=>o("br",null,null,-1)),ut=m(()=>o("br",null,null,-1)),pt=m(()=>o("small",{class:"text-muted"},"(Private vaults can only be viewed by you)",-1)),_t=m(()=>o("div",{class:"d-flex justify-content-end mt-4"},[o("button",{class:"btn btn-primary"},"submit")],-1));function mt(s,e,a,t,l,i){return u(),p("div",Re,[Be,o("div",He,[o("div",ze,[o("div",Ye,[o("div",We,[o("div",Fe,[Ge,o("form",{action:"",onSubmit:e[3]||(e[3]=O(r=>t.createKeep(),["prevent"])),id:"create-keep-form"},[Je,v(o("input",{type:"text",class:"form-control",placeholder:"title...","onUpdate:modelValue":e[0]||(e[0]=r=>t.keepData.name=r),required:""},null,512),[[f,t.keepData.name]]),Qe,v(o("input",{type:"text",class:"form-control",placeholder:"image url...","onUpdate:modelValue":e[1]||(e[1]=r=>t.keepData.img=r),required:""},null,512),[[f,t.keepData.img]]),Xe,v(o("textarea",{name:"",id:"",cols:"30",rows:"6",placeholder:"description...",required:"",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=r=>t.keepData.description=r)},null,512),[[f,t.keepData.description]]),Ze],32)])])])])]),o("div",et,[o("div",tt,[o("div",at,[o("div",ot,[o("div",st,[rt,o("form",{action:"",onSubmit:e[8]||(e[8]=O(r=>t.createVault(),["prevent"])),id:"create-vault-form"},[nt,v(o("input",{type:"text",class:"form-control",placeholder:"title...","onUpdate:modelValue":e[4]||(e[4]=r=>t.vaultData.name=r),required:""},null,512),[[f,t.vaultData.name]]),lt,v(o("input",{type:"text",class:"form-control",placeholder:"image url...","onUpdate:modelValue":e[5]||(e[5]=r=>t.vaultData.img=r),required:""},null,512),[[f,t.vaultData.img]]),it,v(o("textarea",{name:"",id:"",cols:"30",rows:"6",placeholder:"description...",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=r=>t.vaultData.description=r),required:""},null,512),[[f,t.vaultData.description]]),ct,dt,v(o("input",{type:"checkbox",class:"","onUpdate:modelValue":e[7]||(e[7]=r=>t.vaultData.isPrivate=r),"true-value":!0,"false-value":!1},null,512),[[se,t.vaultData.isPrivate]]),ut,pt,_t],32)])])])])])])}var gt=y(Ue,[["render",mt],["__scopeId","data-v-6be30a3c"]]),vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gt});const ft={props:{keep:{type:Object,required:!0}},setup(s){return{setActiveKeep(){s.keep.views++,n.activeKeep=s.keep,K.incrementViews(s.keep.id,s.keep)}}}},ht={class:"component"},bt=["src"],yt={class:"d-flex justify-content-between img-text mx-2"},kt={class:"mx-2"},wt=["src"];function xt(s,e,a,t,l,i){var r;return u(),p("div",ht,[o("div",{class:"keep-container h-20 w-20 text-light","data-bs-target":"#keepModal","data-bs-toggle":"modal",onClick:e[0]||(e[0]=_=>t.setActiveKeep())},[o("img",{src:a.keep.img,alt:"",class:"img-fluid keep-img"},null,8,bt),o("div",yt,[o("h3",kt,h(a.keep.name),1),o("img",{src:(r=a.keep.creator)==null?void 0:r.picture,alt:"",class:"creator-img my-2"},null,8,wt)])])])}var Vt=y(ft,[["render",xt],["__scopeId","data-v-4222c90b"]]),Kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vt});class $t{async createVaultKeep(e){try{const a=await d.post("api/vaultKeeps",e);c.toast("Keep Successfully Added to Vault!","success")}catch(a){c.toast(a.message),console.error(a)}}async getVaultKeeps(e){try{const a=await d.get(`api/vaults/${e}/keeps`);n.activeVaultKeeps=a.data,console.log(n.activeVaultKeeps)}catch(a){console.error(a),c.toast(a.response.data,"error")}}async deleteVaultKeep(e){try{const a=await d.delete(`api/vaultkeeps/${e}`);n.activeVaultKeeps=n.activeVaultKeeps.filter(t=>t.vaultKeepId!=e),console.log(a.data)}catch(a){console.error(a),c.toast(a.message)}}}const W=new $t;const St={setup(){let s=w(()=>n.activeKeep),e=w(()=>n.userVaults),a=ne(),t=le(),l=w(()=>n.account);return{keep:s,userVaults:e,route:t,account:l,async createVaultKeep(i,r,_){let b={keepId:i,vaultId:r};await W.createVaultKeep(b),await K.incrementKeeps(i,_)},goToProfilePage(i){a.push({name:"Profile",params:{id:i}})},async deleteVaultKeep(i){await c.confirm("are you sure you want to remove this keep?")&&(T.getOrCreateInstance(document.getElementById("keepModal")).hide(),await W.deleteVaultKeep(i))},async deleteKeep(i){await c.confirm("are you sure you want to delete the keep?","This cannot be undone","warning")&&(await K.deleteKeep(i),T.getOrCreateInstance(document.getElementById("keepModal")).hide())},checkVault(){if(n.activeVault.creatorId==n.account.id)return!0}}}},$=s=>(D("data-v-13ef680b"),s=s(),M(),s),At={class:"component"},Pt={class:"modal fade",id:"keepModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ct={class:"modal-dialog modal-xl modal-dialog-centered"},Et={class:"modal-content"},Tt={class:"modal-body p-0"},Dt={class:"row"},Mt={class:"col-md-6"},It=["src"],Ot={class:"col-md-6"},Lt={class:"d-flex flex-column mt-4 justify-content-between h-100 pe-3"},jt={class:"d-flex justify-content-center fs-4 text-primary"},Nt=$(()=>o("i",{class:"mdi mdi-eye"},null,-1)),qt={class:"ms-1 me-4"},Ut={class:"d-flex justify-content-between"},Rt={class:"d-flex"},Bt=$(()=>o("i",{class:"mdi mdi-alpha-k-box-outline"},null,-1)),Ht={class:"ms-1 me-4"},zt=$(()=>o("i",{class:"mdi mdi-close d-md-none text-danger keep-close-container","data-bs-toggle":"modal","data-bs-target":"#keepModal"},null,-1)),Yt={class:"d-flex flex-column mb-5"},Wt={class:"align-self-center my-5"},Ft={class:"mt-3 mx-5"},Gt=$(()=>o("div",{class:"divider-line"},null,-1)),Jt={class:"my-5 d-flex justify-content-between align-items-center"},Qt={key:1,class:"dropdown"},Xt=$(()=>o("button",{class:"btn btn-outline-primary dropdown-toggle mx-2",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Add To Vault ",-1)),Zt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ea=["onClick"],ta={key:0},aa=$(()=>o("i",{class:"mdi mdi-trash-can-outline text-primary cursor-pointer"},null,-1)),oa=[aa],sa=["src"],ra={class:"mx-2 my-0"};function na(s,e,a,t,l,i){var r,_,b;return u(),p("div",At,[o("div",Pt,[o("div",Ct,[o("div",Et,[o("div",Tt,[o("div",Dt,[o("div",Mt,[o("img",{src:t.keep.img,class:"keep-img img-fluid",alt:""},null,8,It)]),o("div",Ot,[o("div",Lt,[o("div",jt,[Nt,o("p",qt,h(t.keep.views),1),o("div",Ut,[o("div",Rt,[Bt,o("p",Ht,h(t.keep.kept),1)]),zt])]),o("div",Yt,[o("h2",Wt,h(t.keep.name),1),o("p",Ft,h(t.keep.description),1),Gt]),o("div",Jt,[t.route.name=="Vault"&&t.checkVault()?(u(),p("button",{key:0,class:"btn btn-outline-danger",onClick:e[0]||(e[0]=k=>t.deleteVaultKeep(t.keep.vaultKeepId)),"data-bs-toggle":"modal","data-bs-target":"#keepModal"},"Remove From Vault")):A("",!0),t.route.name!="Vault"&&t.account.id?(u(),p("div",Qt,[Xt,o("ul",Zt,[(u(!0),p(U,null,ie(t.userVaults,k=>(u(),p("li",{key:k.id},[o("a",{class:"dropdown-item",onClick:I=>t.createVaultKeep(t.keep.id,k.id,t.keep)},h(k.name),9,ea)]))),128)),t.userVaults.length<1?(u(),p("li",ta,"Create a vault first")):A("",!0)])])):A("",!0),((r=t.keep.creator)==null?void 0:r.id)==t.account.id?(u(),p("h2",{key:2,onClick:e[1]||(e[1]=k=>t.deleteKeep(t.keep.id))},oa)):A("",!0),o("div",{class:"bg-dark rounded m-2 p-2 d-flex align-items-center profile",onClick:e[2]||(e[2]=k=>{var I;return t.goToProfilePage((I=t.keep.creator)==null?void 0:I.id)}),"data-bs-toggle":"modal","data-bs-target":"#keepModal"},[o("img",{class:"profile-img",src:(_=t.keep.creator)==null?void 0:_.picture,alt:""},null,8,sa),o("p",ra,h((b=t.keep.creator)==null?void 0:b.name),1)])])])])])])])])])])}var la=y(St,[["render",na],["__scopeId","data-v-13ef680b"]]),ia=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:la});function E(s,e){if(z)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const S={log(){E("log",arguments)},error(){E("error",arguments)},warn(){E("warn",arguments)},assert(){E("assert",arguments)},trace(){E("trace",arguments)}};class ca{async getAccount(){try{const e=await d.get("/account");n.account=e.data}catch(e){S.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getAccountVaults(){try{const e=await d.get("/account/vaults");n.userVaults=e.data}catch(e){console.log(e),c.toast(e.message,"error")}}}const F=new ca;class da{async getProfileKeeps(e){try{const a=await d.get(`api/profiles/${e}/keeps`);n.account.id===e&&(n.userKeeps=a.data),n.profileKeeps=a.data}catch(a){console.log(a),c.toast(a.message,"error")}}async getProfileVaults(e){try{const a=await d.get(`api/profiles/${e}/vaults`);n.profileVaults=a.data}catch(a){console.error(a),c.toast(a.message)}}async getProfile(e){try{const a=await d.get(`api/profiles/${e}`);n.activeProfile=a.data}catch(a){console.error(a),c.toast(a.message)}}}const ua=new da,pa={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class _a{constructor(e=!1,a=Y){}on(e,a){var t;return(t=this.socket)==null||t.on(e,a.bind(this)),this}onConnected(e){S.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){S.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var a;(a=this.socket)==null||a.emit(pa.authenticate,e)}onError(e){S.error("[SOCKET_ERROR]",e)}enqueue(e,a){S.log("[ENQUEING_ACTION]",{action:e,payload:a}),this.queue.push({action:e,payload:a})}playback(){S.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(a=>{this.emit(a.action,a.payload)})}emit(e,a=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,a);if(!this.connected)return this.enqueue(e,a);this.socket.emit(e,a)}}class ma extends _a{constructor(){super();this.on("error",this.onError)}onError(e){c.toast(e.message,"error")}}const G=new ma,g=ce({domain:fe,clientId:he,audience:be,useRefreshTokens:!0,onRedirectCallback:s=>{L.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});g.on(g.AUTH_EVENTS.AUTHENTICATED,async function(){d.defaults.headers.authorization=g.bearer,d.interceptors.request.use(ga),n.user=g.user,await F.getAccount(),G.authenticate(g.bearer),await F.getAccountVaults(),await ua.getProfileKeeps(n.account.id)});async function ga(s){if(!g.isAuthenticated)return s;const e=g.identity.exp*1e3,a=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return a?await g.loginWithPopup():t&&(await g.getTokenSilently(),d.defaults.headers.authorization=g.bearer,G.authenticate(g.bearer)),s}const va={setup(){return{user:w(()=>n.user),account:w(()=>n.account),async login(){g.loginWithPopup()},async logout(){g.logout({returnTo:window.location.origin})}}}},J=s=>(D("data-v-271d2472"),s=s(),M(),s),fa={class:"navbar-text"},ha={key:1,class:"dropdown my-2 my-lg-0"},ba={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown",role:"directory","aria-expanded":"false",id:"authDropdown"},ya={key:0},ka=["src"],wa={class:"mx-3 text-success lighten-30"},xa={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Va=J(()=>o("div",{class:"list-group-item list-group-item-action hoverable"}," View Profile ",-1)),Ka=J(()=>o("i",{class:"mdi mdi-logout"},null,-1)),$a=de(" logout "),Sa=[Ka,$a];function Aa(s,e,a,t,l,i){const r=x("router-link");return u(),p("span",fa,[t.user.isAuthenticated?(u(),p("div",ha,[o("div",ba,[t.account.picture?(u(),p("div",ya,[o("img",{src:t.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,ka),o("span",wa,h(t.account.name),1)])):A("",!0)]),o("div",xa,[V(r,{to:{name:"Profile",params:{id:t.account.id}}},{default:B(()=>[Va]),_:1},8,["to"]),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(..._)=>t.logout&&t.logout(..._))},Sa)])])):(u(),p("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(..._)=>t.login&&t.login(..._))}," Login "))])}var Pa=y(va,[["render",Aa],["__scopeId","data-v-271d2472"]]),Ca=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pa}),Ea="/assets/k-logo-png-transparent.908bca89.png";const Ta={setup(){return{}}},j=s=>(D("data-v-6e2e20fa"),s=s(),M(),s),Da={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3"},Ma=j(()=>o("div",{class:"d-flex align-items-center"},[o("img",{alt:"logo",src:Ea,height:"45"})],-1)),Ia=j(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),Oa={class:"collapse navbar-collapse",id:"navbarText"},La=j(()=>o("ul",{class:"navbar-nav me-auto"},null,-1));function ja(s,e,a,t,l,i){const r=x("router-link"),_=x("Login");return u(),p("nav",Da,[V(r,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:B(()=>[Ma]),_:1}),Ia,o("div",Oa,[La,V(_,{class:"bg-dark rounded p-2"})])])}var Na=y(Ta,[["render",ja],["__scopeId","data-v-6e2e20fa"]]),qa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Na});const Ua={props:{keep:{type:Object,required:!0}},setup(s){return{setActiveKeep(){s.keep.views++,n.activeKeep=s.keep,K.incrementViews(s.keep.id,s.keep)}}}},Ra={class:"component"},Ba=["src"],Ha={class:"d-flex justify-content-between img-text mx-2"},za={class:"mx-2"},Ya=["src"];function Wa(s,e,a,t,l,i){var r;return u(),p("div",Ra,[o("div",{class:"keep-container","data-bs-target":"#keepModal","data-bs-toggle":"modal",onClick:e[0]||(e[0]=_=>t.setActiveKeep())},[o("img",{src:a.keep.img,alt:"",class:"img-fluid"},null,8,Ba),o("div",Ha,[o("h3",za,h(a.keep.name),1),o("img",{src:(r=a.keep.creator)==null?void 0:r.picture,alt:"",class:"creator-img my-2"},null,8,Ya)])])])}var Fa=y(Ua,[["render",Wa],["__scopeId","data-v-04473658"]]),Ga=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fa});function Ja(s){Object.entries({"./components/CreateVaultModal.vue":je,"./components/CreateVaultsAndKeeps.vue":vt,"./components/Keep.vue":Kt,"./components/KeepModal.vue":ia,"./components/Login.vue":Ca,"./components/Navbar.vue":qa,"./components/VaultKeep.vue":Ga}).forEach(([a,t])=>{const l=t.name||a.substr(a.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(l,t.default)})}const Q=ue(xe);Ja(Q);Q.use(L).mount("#app");export{n as A,Vt as K,c as P,y as _,W as a,ua as p,qe as v};
